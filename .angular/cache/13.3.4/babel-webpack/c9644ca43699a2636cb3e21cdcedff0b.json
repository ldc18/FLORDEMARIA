{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\nimport { filter, take } from 'rxjs/operators';\nimport * as actions from '../../../store/actions';\nimport * as fromRoot from '../../../store/reducers';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@ngrx/store\";\nimport * as i3 from \"ng-recaptcha\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/progress-bar\";\nimport * as i9 from \"../../../pipes/translate.pipe\";\n\nfunction ContactComponent_mat_progress_bar_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 12);\n  }\n}\n\nfunction ContactComponent_div_35_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const error_r4 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, i0.ɵɵpipeBind1(3, 3, error_r4)), \" \");\n  }\n}\n\nfunction ContactComponent_div_35_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, i0.ɵɵpipeBind1(3, 3, \"CONTACT_SEND_SUCCESS\")), \" \");\n  }\n}\n\nfunction ContactComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ContactComponent_div_35_span_1_Template, 4, 5, \"span\", 13);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵtemplate(3, ContactComponent_div_35_span_3_Template, 4, 5, \"span\", 14);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx_r1.error$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(4, 4, ctx_r1.error$));\n  }\n}\n\nexport let ContactComponent = /*#__PURE__*/(() => {\n  class ContactComponent {\n    constructor(fb, store, recaptchaV3Service) {\n      this.fb = fb;\n      this.store = store;\n      this.recaptchaV3Service = recaptchaV3Service;\n      this.sendRequestSub$ = new BehaviorSubject(false);\n      this.contactForm = this.fb.group({\n        name: ['', Validators.required],\n        email: ['', Validators.compose([Validators.required, Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$')])],\n        notes: ['', Validators.required]\n      });\n      this.loading$ = this.store.select(fromRoot.getEshopLoading);\n      this.error$ = this.store.select(fromRoot.getEshopError);\n    }\n\n    submit() {\n      const formValues = this.contactForm.value;\n      this.contactForm.reset();\n      this.recaptchaV3Service.execute('contact').subscribe(token => {\n        this.store.dispatch(new actions.SendContact({ ...formValues,\n          token\n        }));\n        this.loading$.pipe(filter(loading => !loading), take(1)).subscribe(() => {\n          this.sendRequestSub$.next(true);\n        });\n      });\n    }\n\n  }\n\n  ContactComponent.ɵfac = function ContactComponent_Factory(t) {\n    return new (t || ContactComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Store), i0.ɵɵdirectiveInject(i3.ReCaptchaV3Service));\n  };\n\n  ContactComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ContactComponent,\n    selectors: [[\"app-contact\"]],\n    decls: 37,\n    vars: 38,\n    consts: [[1, \"main\"], [1, \"container\"], [1, \"contact-form-wrap\"], [1, \"contact-title\"], [1, \"contact-form\", 3, \"formGroup\"], [1, \"contact-field\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"type\", \"text\", \"name\", \"contantName\"], [\"matInput\", \"\", \"formControlName\", \"email\", \"type\", \"email\", \"name\", \"email\"], [\"matInput\", \"\", \"formControlName\", \"notes\", \"name\", \"notes\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"submit-contact-button\", 3, \"disabled\", \"click\"], [\"mode\", \"indeterminate\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mode\", \"indeterminate\"], [\"class\", \"contact-error\", 4, \"ngIf\"], [\"class\", \"contact-success\", 4, \"ngIf\"], [1, \"contact-error\"], [1, \"contact-success\"]],\n    template: function ContactComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵpipe(5, \"async\");\n        i0.ɵɵpipe(6, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"form\", 4)(8, \"mat-form-field\", 5)(9, \"mat-label\");\n        i0.ɵɵtext(10);\n        i0.ɵɵpipe(11, \"async\");\n        i0.ɵɵpipe(12, \"translate\");\n        i0.ɵɵpipe(13, \"async\");\n        i0.ɵɵpipe(14, \"translate\");\n        i0.ɵɵpipe(15, \"async\");\n        i0.ɵɵpipe(16, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"mat-form-field\", 5)(19, \"mat-label\");\n        i0.ɵɵtext(20, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"mat-form-field\", 5)(23, \"mat-label\");\n        i0.ɵɵtext(24);\n        i0.ɵɵpipe(25, \"async\");\n        i0.ɵɵpipe(26, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"textarea\", 8);\n        i0.ɵɵtext(28, \"          \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function ContactComponent_Template_button_click_29_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵtext(30);\n        i0.ɵɵpipe(31, \"async\");\n        i0.ɵɵpipe(32, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(33, ContactComponent_mat_progress_bar_33_Template, 1, 0, \"mat-progress-bar\", 10);\n        i0.ɵɵpipe(34, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(35, ContactComponent_div_35_Template, 5, 6, \"div\", 11);\n        i0.ɵɵpipe(36, \"async\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 10, i0.ɵɵpipeBind1(6, 12, \"Contact\")));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.contactForm);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(11, 14, i0.ɵɵpipeBind1(12, 16, \"Firstname\")), \" \", i0.ɵɵpipeBind1(13, 18, i0.ɵɵpipeBind1(14, 20, \"and\")), \" \", i0.ɵɵpipeBind1(15, 22, i0.ɵɵpipeBind1(16, 24, \"Surname\")), \" \");\n        i0.ɵɵadvance(14);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 26, i0.ɵɵpipeBind1(26, 28, \"Notes\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", ctx.contactForm.invalid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(31, 30, i0.ɵɵpipeBind1(32, 32, \"SendContact\")), \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(34, 34, ctx.loading$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(36, 36, ctx.sendRequestSub$));\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i4.MatFormField, i4.MatLabel, i5.MatInput, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i6.MatButton, i7.NgIf, i8.MatProgressBar],\n    pipes: [i7.AsyncPipe, i9.TranslatePipe],\n    styles: [\"[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .contact-form-wrap[_ngcontent-%COMP%]{margin:15px auto;max-width:500px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;background:#fff;position:relative;padding:15px}[_nghost-%COMP%]   .contact-title[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .contact-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .contact-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .contact-success[_ngcontent-%COMP%]{color:var(--success-color)}[_nghost-%COMP%]   .contact-error[_ngcontent-%COMP%]{color:var(--error-color)}\"]\n  });\n  return ContactComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}