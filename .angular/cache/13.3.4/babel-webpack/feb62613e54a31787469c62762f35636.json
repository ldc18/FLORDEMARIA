{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport * as fromRoot from '../../../store/reducers';\nimport * as actions from '../../../store/actions';\nimport { languages } from '../../../shared/constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../../services/theme.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/select\";\nimport * as i9 from \"@angular/material/core\";\nimport * as i10 from \"@angular/material/radio\";\nimport * as i11 from \"../../../pipes/translate.pipe\";\n\nfunction ThemeEditComponent_ng_container_0_mat_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r4.titleUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r4.titleUrl, \" \");\n  }\n}\n\nfunction ThemeEditComponent_ng_container_0_form_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"form\", 13)(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-form-field\", 3)(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Primary color\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-form-field\", 3)(8, \"mat-label\");\n    i0.ɵɵtext(9, \"Secondary color\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"mat-form-field\", 3)(12, \"mat-label\");\n    i0.ɵɵtext(13, \"Background color\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"mat-form-field\", 17)(16, \"mat-label\");\n    i0.ɵɵtext(17, \"Main Background\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"mat-form-field\", 17)(20, \"mat-label\");\n    i0.ɵɵtext(21, \"Logo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(22, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"mat-form-field\", 17)(24, \"mat-label\");\n    i0.ɵɵtext(25, \"Promo slide background\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(26, \"input\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"mat-form-field\", 17)(28, \"mat-label\");\n    i0.ɵɵtext(29);\n    i0.ɵɵpipe(30, \"async\");\n    i0.ɵɵpipe(31, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"mat-select\", 21)(33, \"mat-option\", 12);\n    i0.ɵɵtext(34);\n    i0.ɵɵpipe(35, \"async\");\n    i0.ɵɵpipe(36, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"mat-option\", 12);\n    i0.ɵɵtext(38);\n    i0.ɵɵpipe(39, \"async\");\n    i0.ɵɵpipe(40, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(41, \"mat-form-field\", 17)(42, \"mat-label\");\n    i0.ɵɵtext(43);\n    i0.ɵɵpipe(44, \"async\");\n    i0.ɵɵpipe(45, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"mat-select\", 22)(47, \"mat-option\", 12);\n    i0.ɵɵtext(48);\n    i0.ɵɵpipe(49, \"async\");\n    i0.ɵɵpipe(50, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"mat-option\", 12);\n    i0.ɵɵtext(52);\n    i0.ɵɵpipe(53, \"async\");\n    i0.ɵɵpipe(54, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(55, \"mat-radio-group\", 23)(56, \"mat-radio-button\", 24);\n    i0.ɵɵtext(57);\n    i0.ɵɵpipe(58, \"async\");\n    i0.ɵɵpipe(59, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(60, \"mat-radio-button\", 25);\n    i0.ɵɵtext(61);\n    i0.ɵɵpipe(62, \"async\");\n    i0.ɵɵpipe(63, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.themesEditForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.themesEditForm.get(\"titleUrl\").value, \" \");\n    i0.ɵɵadvance(27);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(30, 16, i0.ɵɵpipeBind1(31, 18, \"Show_shipping_promo\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", \"none\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(35, 20, i0.ɵɵpipeBind1(36, 22, \"Hide\")));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", \"block\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(39, 24, i0.ɵɵpipeBind1(40, 26, \"Show\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(44, 28, i0.ɵɵpipeBind1(45, 30, \"Show_promo\")));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", \"none\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(49, 32, i0.ɵɵpipeBind1(50, 34, \"Hide\")));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", \"block\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(53, 36, i0.ɵɵpipeBind1(54, 38, \"Show\")));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(58, 40, i0.ɵɵpipeBind1(59, 42, \"Active\")), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(62, 44, i0.ɵɵpipeBind1(63, 46, \"Inactive\")), \" \");\n  }\n}\n\nfunction ThemeEditComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 2)(2, \"div\")(3, \"mat-form-field\", 3)(4, \"mat-label\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"async\");\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function ThemeEditComponent_ng_container_0_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.newTheme = $event;\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ThemeEditComponent_ng_container_0_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.addTheme();\n    });\n    i0.ɵɵtext(10, \" + \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"mat-form-field\", 6)(12, \"mat-label\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"async\");\n    i0.ɵɵpipe(15, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"mat-select\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function ThemeEditComponent_ng_container_0_Template_mat_select_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.chosenTheme = $event;\n    })(\"ngModelChange\", function ThemeEditComponent_ng_container_0_Template_mat_select_ngModelChange_16_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.choseTheme();\n    });\n    i0.ɵɵtemplate(17, ThemeEditComponent_ng_container_0_mat_option_17_Template, 2, 2, \"mat-option\", 8);\n    i0.ɵɵpipe(18, \"async\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, ThemeEditComponent_ng_container_0_form_19_Template, 64, 48, \"form\", 9);\n    i0.ɵɵelementStart(20, \"div\", 10)(21, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ThemeEditComponent_ng_container_0_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.saveTheme();\n    });\n    i0.ɵɵtext(22, \" Save \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ThemeEditComponent_ng_container_0_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.removeTheme();\n    });\n    i0.ɵɵtext(24, \" Remove \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 8, i0.ɵɵpipeBind1(7, 10, \"Add_theme\")));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newTheme);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(14, 12, i0.ɵɵpipeBind1(15, 14, \"From_existing_themes\")), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.chosenTheme);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(18, 16, ctx_r0.themes$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.themesEditForm.get(\"titleUrl\").value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.themesEditForm.invalid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.themesEditForm.invalid);\n  }\n}\n\nfunction ThemeEditComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function ThemeEditComponent_div_1_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.sendRequest = !ctx_r12.sendRequest;\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"async\");\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 2, i0.ɵɵpipeBind1(4, 4, \"Request_sended\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 6, i0.ɵɵpipeBind1(8, 8, \"Again\")), \" \");\n  }\n}\n\nexport let ThemeEditComponent = /*#__PURE__*/(() => {\n  class ThemeEditComponent {\n    constructor(store, fb, themeService) {\n      this.store = store;\n      this.fb = fb;\n      this.themeService = themeService;\n      this.languageOptions = languages;\n      this.choosenLanguageSub$ = new BehaviorSubject(languages[0]);\n      this.newTheme = '';\n      this.chosenTheme = '';\n      this.sendRequest = false;\n      this.store.dispatch(new actions.GetThemes());\n      this.themesEditForm = this.fb.group({\n        titleUrl: ['', Validators.required],\n        ...this.startFormValues()\n      });\n      this.themes$ = this.store.select(fromRoot.getThemes);\n      this.themesEditForm.valueChanges.subscribe(values => {\n        this.themeService.setCSSVariable(values.primaryColor, 'primary-color');\n        this.themeService.setCSSVariable(values.secondaryColor, 'secondary-color');\n        this.themeService.setCSSVariable(values.backgroundColor, 'background-color');\n        this.themeService.setThemeColor(values.primaryColor, 'theme-primary');\n        this.themeService.setThemeColor(values.secondaryColor, 'theme-secondary');\n\n        if (values.mainBackground) {\n          this.themeService.setCSSVariable(values.mainBackground, 'main-background');\n          this.themeService.setCSSVariable(`url(${values.mainBackground})`, 'main-background-url');\n        } else {\n          this.themeService.setCSSVariable(`url(/)`, 'main-background-url');\n        }\n\n        this.themeService.setCSSVariable(values.freeShippingPromo, 'free-shipping-promo');\n        this.themeService.setCSSVariable(`url(${values.promoSlideBackground})`, 'promo-slide-background');\n        this.themeService.setCSSVariable(values.promo, 'promo');\n        this.themeService.setCSSVariable(`url(${values.logo})`, 'logo');\n      });\n    }\n\n    addTheme() {\n      if (this.newTheme) {\n        this.themesEditForm.get('titleUrl').setValue(this.newTheme);\n        const newForm = {\n          titleUrl: this.newTheme,\n          ...this.startFormValues()\n        };\n        this.themesEditForm.setValue(newForm);\n      }\n    }\n\n    choseTheme() {\n      if (this.chosenTheme) {\n        this.themesEditForm.get('titleUrl').setValue(this.chosenTheme);\n        this.themes$.pipe(take(1)).subscribe(themes => {\n          const foundTheme = themes.find(theme => theme.titleUrl === this.chosenTheme);\n          this.themesEditForm.get('active').setValue(!!foundTheme.active);\n          this.themesEditForm.get('freeShippingPromo').setValue(foundTheme.styles.freeShippingPromo || 'none');\n          this.themesEditForm.get('promoSlideBackground').setValue(foundTheme.styles.promoSlideBackground || '');\n          this.themesEditForm.get('promo').setValue(foundTheme.styles.promo || 'none');\n          this.themesEditForm.get('primaryColor').setValue(foundTheme.styles.primaryColor || '');\n          this.themesEditForm.get('secondaryColor').setValue(foundTheme.styles.secondaryColor || '');\n          this.themesEditForm.get('backgroundColor').setValue(foundTheme.styles.backgroundColor || '');\n          this.themesEditForm.get('mainBackground').setValue(foundTheme.styles.mainBackground || '');\n          this.themesEditForm.get('logo').setValue(foundTheme.styles.logo || '');\n        });\n      }\n    }\n\n    saveTheme() {\n      const formValues = this.themesEditForm.value;\n      const request = {\n        titleUrl: formValues.titleUrl,\n        active: formValues.active,\n        styles: {\n          primaryColor: formValues.primaryColor,\n          promoSlideBackground: formValues.promoSlideBackground,\n          secondaryColor: formValues.secondaryColor,\n          backgroundColor: formValues.backgroundColor,\n          mainBackground: formValues.mainBackground,\n          freeShippingPromo: formValues.freeShippingPromo,\n          promo: formValues.promo,\n          logo: formValues.logo\n        }\n      };\n      this.store.dispatch(new actions.AddOrEditTheme(request));\n      this.sendRequest = true;\n    }\n\n    removeTheme() {\n      this.store.dispatch(new actions.RemoveTheme(this.chosenTheme));\n      this.sendRequest = true;\n    }\n\n    startFormValues() {\n      return {\n        active: false,\n        freeShippingPromo: 'none',\n        promoSlideBackground: '',\n        promo: 'none',\n        primaryColor: '#222222',\n        secondaryColor: '#cccccc',\n        backgroundColor: '#eeeeee',\n        mainBackground: '',\n        logo: ''\n      };\n    }\n\n  }\n\n  ThemeEditComponent.ɵfac = function ThemeEditComponent_Factory(t) {\n    return new (t || ThemeEditComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ThemeService));\n  };\n\n  ThemeEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ThemeEditComponent,\n    selectors: [[\"app-theme-edit\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [\"class\", \"theme_edit-after-send\", 4, \"ngIf\"], [1, \"theme_edit-top\"], [1, \"theme_edit-field\"], [\"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"mat-flat-button\", \"\", \"color\", \"accent\", 1, \"translations-button\", 3, \"click\"], [1, \"theme-select\"], [3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"theme_edit-form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"theme_edit-cta\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [3, \"value\"], [1, \"theme_edit-form\", 3, \"formGroup\"], [\"matInput\", \"\", \"type\", \"color\", \"formControlName\", \"primaryColor\"], [\"matInput\", \"\", \"type\", \"color\", \"formControlName\", \"secondaryColor\"], [\"matInput\", \"\", \"type\", \"color\", \"formControlName\", \"backgroundColor\"], [1, \"theme_edit-field-full\"], [\"matInput\", \"\", \"formControlName\", \"mainBackground\"], [\"matInput\", \"\", \"formControlName\", \"logo\"], [\"matInput\", \"\", \"formControlName\", \"promoSlideBackground\"], [\"formControlName\", \"freeShippingPromo\"], [\"formControlName\", \"promo\"], [\"aria-label\", \"Active\", \"formControlName\", \"active\"], [\"name\", \"active\", \"id\", \"active\", 3, \"value\"], [\"name\", \"inactive\", \"id\", \"inactive\", 3, \"value\"], [1, \"theme_edit-after-send\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"product_edit-btn-action\", 3, \"click\"]],\n    template: function ThemeEditComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ThemeEditComponent_ng_container_0_Template, 25, 18, \"ng-container\", 0);\n        i0.ɵɵtemplate(1, ThemeEditComponent_div_1_Template, 9, 10, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.sendRequest);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.sendRequest);\n      }\n    },\n    directives: [i4.NgIf, i5.MatFormField, i5.MatLabel, i6.MatInput, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i7.MatButton, i8.MatSelect, i4.NgForOf, i9.MatOption, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i10.MatRadioGroup, i10.MatRadioButton],\n    pipes: [i4.AsyncPipe, i11.TranslatePipe],\n    styles: [\"[_nghost-%COMP%]     .mat-radio-button~.mat-radio-button{margin-left:16px}@media screen and (max-width: 600px){[_nghost-%COMP%]     .mat-radio-button~.mat-radio-button{margin-left:4px}}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]{background:#fff}[_nghost-%COMP%]   .theme_edit-top[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between}[_nghost-%COMP%]   .theme_edit-after-send[_ngcontent-%COMP%]{display:flex;align-items:center;padding:50px}[_nghost-%COMP%]   .theme_edit-field-full[_ngcontent-%COMP%]{width:100%;margin:5px}[_nghost-%COMP%]   .theme_edit-cta[_ngcontent-%COMP%]{margin:20px 0;display:flex;justify-content:space-between;width:50%}\"]\n  });\n  return ThemeEditComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}